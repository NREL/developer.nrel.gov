---
title: Solar Dataset Query V2
summary: Returns information about data available for a given location for the solar resource database used by the <a href="https://pvwatts.nrel.gov">PVWattsÂ® Calculator</a> and <a href="/docs/solar/pvwatts/v8/">PVWatts v8 API</a>.
url: GET /api/solar/data_query/v2

---

# <%= current_page.data.title %> <span class="url">(<%= current_page.data.url %>)</span>
<%= current_page.data.summary %>

<ul id="toc"></ul>

## Request URL

<pre>GET /api/solar/data_query/v2<em>.format?parameters</em></pre>

## Request Parameters

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">Parameter</th>
      <th class="doc-parameters-required" scope="col">Required</th>
      <th class="doc-parameters-value" scope="col">Value</th>
      <th class="doc-parameters-description" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">format</th>
      <td class="doc-parameter-required">Yes</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> string
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
        <div class="doc-parameter-value-field">
          <strong>Options:</strong> <em>json</em>, <em>xml</em>, <em>csv</em>
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>The output response format.</p>
      </td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">api_key</th>
      <td class="doc-parameter-required">Yes</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> string
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>Your developer API key. See <a href="/docs/api-key/">API keys</a> for more information.</p>
      </td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lat</th>
      <td class="doc-parameter-required">Yes</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> decimal
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
        <div class="doc-parameter-value-field">
          <strong>Min:</strong> <i>-90</i>
        </div>
        <div class="doc-parameter-value-field">
          <strong>Max:</strong> <i>90</i>
        </div>
      </td>
      <td class="doc-parameter-description">The latitude for the location to use.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lon</th>
      <td class="doc-parameter-required">Yes</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> decimal
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> None
        </div>
        <div class="doc-parameter-value-field">
          <strong>Min:</strong> <i>-180</i>
        </div>
        <div class="doc-parameter-value-field">
          <strong>Max:</strong> <i>180</i>
        </div>
      </td>
      <td class="doc-parameter-description">The longitude for the location to use.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">radius</th>
      <td class="doc-parameter-required">No</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> integer
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> 100
        </div>
        <div class="doc-parameter-value-field">
          <strong>Min:</strong> 0
        </div>
        <div class="doc-parameter-value-field">
          <strong>Max:</strong> 2000
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>The search radius to use when searching for climate data stations (miles). Pass in radius=0 to find the closest stations regardless of the distance. A value greater than 0 is required when using in combination with all=1.</p>
      </td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">all</th>
      <td class="doc-parameter-required">No</td>
      <td class="doc-parameter-value">
        <div class="doc-parameter-value-field">
          <strong>Type:</strong> integer
        </div>
        <div class="doc-parameter-value-field">
          <strong>Default:</strong> 0
        </div>
        <div class="doc-parameter-value-field">
          <strong>Options:</strong> <i>0, 1</i>
        </div>
      </td>
      <td class="doc-parameter-description">
        <p>Return all stations within the radius. The closest stations will still be returned individually.</p>
      </td>
    </tr>
  </tbody>
</table>

## Response Fields

The response is composed of service-related informational fields and information about the closest climate data files.

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">Field</th>
      <th class="doc-parameters-value" scope="col">Value</th>
      <th class="doc-parameters-description" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">inputs</th>
      <td class="doc-parameter-value"><strong>Type:</strong> collection</td>
      <td class="doc-parameter-description">The input parameters received in the request.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">errors</th>
      <td class="doc-parameter-value"><strong>Type:</strong> array of strings</td>
      <td class="doc-parameter-description">Any error messages resulting from the request.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">warnings</th>
      <td class="doc-parameter-value"><strong>Type:</strong> array of strings</td>
      <td class="doc-parameter-description">Any warning messages resulting from the request. This includes messages regarding data not being found for one or more datasets.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">version</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">The current version of the web service.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">metadata</th>
      <td class="doc-parameter-value"><strong>Type:</strong> collection</td>
      <td class="doc-parameter-description">Any metadata associated with the request (sources, etc)</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">outputs</th>
      <td class="doc-parameter-value"><strong>Type:</strong> collection</td>
      <td class="doc-parameter-description">
        <p>Information about the climate data files for each supported dataset. Keys represent the dataset code. (see <a href="#output-fields">output fields</a> for more detail)</p>
        <table border="0" cellpadding="0" cellspacing="0" class="doc-parameter-options">
          <thead>
            <tr>
              <th scope="col">Key</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">nsrdb</th>
              <td>
                <p>Gridded TMY data from the NREL National Solar Radiation Database (<a href="https://nsrdb.nrel.gov/about/what-is-the-nsrdb" target="_blank">NSRDB</a>). Datasets include: <em>NSRDB PSM V3 GOES tmy-2020</em>, <em>NSRDB PSM V3 Himawari tmy-2020</em>, and <em>NSRDB PSM V4 Meteosat Prime Meridian tmy-2022 1.0.0</em></p>
              </td>
            </tr>
            <tr>
              <th scope="row">tmy2</th>
              <td>
                <p>TMY2 station data (see <a href="https://nsrdb.nrel.gov/data-sets/archives.html" target="_blank">NSRDB 1961-1990 Archive</a>)</p>
              </td>
            </tr>
            <tr>
              <th scope="row">tmy3</th>
              <td>
                <p>TMY3 station data (see <a href="https://nsrdb.nrel.gov/data-sets/archives.html">NSRDB 1991-2005 Archive</a>)</p>
              </td>
            </tr>
            <tr>
              <th scope="row">intl</th>
              <td>
                <p>PVWatts International station data</p>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>

### Output Fields

The output fields contain the following information regarding climate data files from each supported dataset. If no data is found for a specific dataset, the service will return null for it in the outputs, and return a message in the warnings.

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">Field</th>
      <th class="doc-parameters-value" scope="col">Value</th>
      <th class="doc-parameters-description" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">id</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">An identifier for the climate data within the dataset.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lat</th>
      <td class="doc-parameter-value"><strong>Type:</strong> decimal</td>
      <td class="doc-parameter-description">The latitude of the station.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">lon</th>
      <td class="doc-parameter-value"><strong>Type:</strong> decimal</td>
      <td class="doc-parameter-description">The longitude of the station.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">city</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">The city where the station is located.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">state</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">The state where the station is located.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">timezone</th>
      <td class="doc-parameter-value"><strong>Type:</strong> integer</td>
      <td class="doc-parameter-description">The timezone of the station, relative to GMT.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">elevation</th>
      <td class="doc-parameter-value"><strong>Type:</strong> integer</td>
      <td class="doc-parameter-description">The elevation of the station in meters.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">distance</th>
      <td class="doc-parameter-value"><strong>Type:</strong> integer</td>
      <td class="doc-parameter-description">The distance in meters from the input location to the station.</td>
    </tr>
    <tr>
      <th class="doc-parameter-name" scope="row">weather_data_source</th>
      <td class="doc-parameter-value"><strong>Type:</strong> string</td>
      <td class="doc-parameter-description">Source of the weather data used in the simulation.</td>
    </tr>
  </tbody>
</table>

## Examples

### JSON Output Format

<pre>GET <a href="/api/solar/data_query/v2.json?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=0&amp;all=1">/api/solar/data_query/v2.json?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=0&amp;all=1</a></pre>

```json
{
  "version": "1.4.0",
  "warnings": [],
  "errors": [],
  "metadata": {},
  "inputs": {
    "api_key": "DEMO_KEY",
    "lat": "40",
    "lon": "-105",
    "radius": "0"
  },
  "outputs": {
    "tmy2": {
      "id": "0-94018",
      "city": "BOULDER",
      "state": "COLORADO",
      "timezone": -7,
      "lat": 40.13,
      "lon": -105.24,
      "elevation": 1689,
      "distance": 13224,
      "weather_data_source": "NSRDB 1961-1990 Archive TMY2"
    },
    "tmy3": {
      "id": "1-724699",
      "city": "BROOMFIELD/JEFFCO [BOULDER - SURFRAD]",
      "state": "COLORADO",
      "timezone": -7,
      "lat": 40.13,
      "lon": -105.24,
      "elevation": 1689,
      "distance": 13224,
      "weather_data_source": "NSRDB 1991-2005 Archive TMY3"
    },
    "intl": {
      "id": "2-26110-tm3",
      "city": "YELLOWKNIFE",
      "state": "NORTHWEST TERRITORIES",
      "timezone": -7,
      "lat": 62.47,
      "lon": -114.45,
      "elevation": 205,
      "distance": 2495062,
      "weather_data_source": "PVWatts International"
    },
    "nsrdb": {
      "id": "3-G-0149190",
      "city": "",
      "state": "Colorado",
      "country": "United States",
      "lat": 40.01,
      "lon": -105.26,
      "distance": 1750,
      "timezone": -7,
      "elevation": 1635,
      "resolution": 4,
      "weather_data_source": "NSRDB PSM V3 GOES tmy-2020 3.2.0"
    }
  }
}
```

### XML Output Format

<pre>GET <a href="/api/solar/data_query/v2.xml?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=0&amp;all=1">/api/solar/data_query/v2.xml?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;radius=0&amp;all=1</a></pre>

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
  <version>1.4.0</version>
  <warnings type="array"/>
  <errors type="array"/>
  <metadata>
  </metadata>
  <inputs>
    <api-key>DEMO_KEY</api-key>
    <lat>40</lat>
    <lon>-105</lon>
    <radius>0</radius>
  </inputs>
  <outputs>
    <tmy2>
      <id>0-94018</id>
      <city>BOULDER</city>
      <state>COLORADO</state>
      <timezone type="integer">-7</timezone>
      <lat type="float">40.13</lat>
      <lon type="float">-105.24</lon>
      <elevation type="integer">1689</elevation>
      <distance type="integer">13224</distance>
      <weather-data-source>NSRDB 1961-1990 Archive TMY2</weather-data-source>
    </tmy2>
    <tmy3>
      <id>1-724699</id>
      <city>BROOMFIELD/JEFFCO [BOULDER - SURFRAD]</city>
      <state>COLORADO</state>
      <timezone type="integer">-7</timezone>
      <lat type="float">40.13</lat>
      <lon type="float">-105.24</lon>
      <elevation type="integer">1689</elevation>
      <distance type="integer">13224</distance>
      <weather-data-source>NSRDB 1991-2005 Archive TMY3</weather-data-source>
    </tmy3>
    <intl>
      <id>2-26110-tm3</id>
      <city>YELLOWKNIFE</city>
      <state>NORTHWEST TERRITORIES</state>
      <timezone type="integer">-7</timezone>
      <lat type="float">62.47</lat>
      <lon type="float">-114.45</lon>
      <elevation type="integer">205</elevation>
      <distance type="integer">2495062</distance>
      <weather-data-source>PVWatts International</weather-data-source>
    </intl>
    <nsrdb>
      <id>3-G-0149190</id>
      <city></city>
      <state>Colorado</state>
      <country>United States</country>
      <lat type="float">40.01</lat>
      <lon type="float">-105.26</lon>
      <distance type="integer">1750</distance>
      <timezone type="integer">-7</timezone>
      <elevation type="integer">1635</elevation>
      <resolution type="integer">4</resolution>
      <weather-data-source>NSRDB PSM V3 GOES tmy-2020 3.2.0</weather-data-source>
    </nsrdb>
  </outputs>
</response>
```

## Rate Limits

[Standard rate limits](/docs/rate-limits) apply. No more than 1,000 requests may be made in any hour

## Errors

[Standard errors](/docs/errors) may be returned. In addition, the following service-specific errors may be returned:

<table border="0" cellpadding="0" cellspacing="0" class="doc-parameters">
  <thead>
    <tr>
      <th class="doc-parameters-name" scope="col">HTTP Status Code</th>
      <th class="doc-parameters-required" scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="doc-parameter-name" scope="row">422</th>
      <td class="doc-parameter-description">Unprocessable Entity - One or more parameters did not pass validation, or a parameter may be missing. Check the errors section of the response to see how the request should be modified to address the error.</td>
    </tr>
  </tbody>
</table>
